{"ast":null,"code":"import _classCallCheck from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'./Login.css';import firebase from'firebase';import StyledFirebaseAuth from'react-firebaseui/StyledFirebaseAuth';import{Link}from'react-router-dom';import{Textbox}from\"react-inputs-validation\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(){var _getPrototypeOf2;var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Login)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={email:\"\",password:\"\",hasEmailError:false,hasPasswordError:false,errorMsg:\"\"};_this.uiConfig={signInFlow:'popup',signInOptions:[firebase.auth.GoogleAuthProvider.PROVIDER_ID,firebase.auth.FacebookAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function signInSuccessWithAuthResult(){return false;}}};_this.handleSubmit=function(e){e.preventDefault();var _this$state=_this.state,hasEmailError=_this$state.hasEmailError,hasPasswordError=_this$state.hasPasswordError,email=_this$state.email,password=_this$state.password;if(!hasEmailError&&!hasPasswordError&&email!==''&&password!==''){firebase.auth().signInWithEmailAndPassword(email,password).catch(function(error){// console.log('err='+error.code,error.message);\nif(error!==''){_this.setState({email:\"\",password:\"\",hasEmailError:true,hasPasswordError:true,errorMsg:\"Your email or password is not correct.\"});}});}};return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){var isLoggedIn=this.props.isLoggedIn;firebase.auth().onAuthStateChanged(function(user){isLoggedIn(!!user);});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prepProps,prevState){var isAuthenticated=this.props.isAuthenticated;if(prepProps.isAuthenticated===false&&isAuthenticated===true){var history=this.props.history;history.push('/');}}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,email=_this$state2.email,hasEmailError=_this$state2.hasEmailError,password=_this$state2.password,hasPasswordError=_this$state2.hasPasswordError,errorMsg=_this$state2.errorMsg;return React.createElement(\"div\",{className:\"login_container\"},React.createElement(\"div\",{className:\"login_title\"},\"Great to see you again!\"),React.createElement(\"div\",{class:\"con\"},React.createElement(StyledFirebaseAuth,{uiConfig:this.uiConfig,firebaseAuth:firebase.auth()})),React.createElement(\"p\",null,\"or\"),React.createElement(\"form\",null,errorMsg!==''?React.createElement(\"div\",{className:\"errorMsg \"},React.createElement(\"i\",{class:\"fas fa-exclamation-circle\"}),errorMsg):'',React.createElement(\"div\",{className:\"text_field\"},React.createElement(\"div\",{className:\"\".concat(email===''?'input_hide':'input_title')},\"Email\"),React.createElement(Textbox,{attributesInput:{className:\"input_field  \".concat(!hasEmailError?'':'input_empt'),placeholder:\"Place your email here\",type:\"text\"},onChange:function onChange(email,e){_this2.setState({email:email});},onBlur:function onBlur(e){},validationCallback:function validationCallback(res){return _this2.setState({hasEmailError:res});},value:email,validationOption:{name:\"Email\",check:true,required:true,customFunc:function customFunc(email){var reg=/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;if(reg.test(String(email).toLowerCase())){_this2.setState({hasEmailError:false});return true;}else{_this2.setState({hasEmailError:true});return\"Ivalid email address\";}}}})),React.createElement(\"div\",{className:\"text_field\"},React.createElement(\"div\",{className:\"\".concat(password===''?'input_hide':'input_title')},\"Password\"),React.createElement(Textbox,{attributesInput:{className:\"input_field  \".concat(!hasPasswordError?'':'input_empt'),placeholder:\"Place your password here (min. 6 char)\",type:\"password\"},onChange:function onChange(password,e){_this2.setState({password:password});},onBlur:function onBlur(e){},validationCallback:function validationCallback(res){return _this2.setState({hasPasswordError:res});},value:password,validationOption:{name:\"Password\",check:true,required:true,customFunc:function customFunc(password){var pwd=/^\\w{6,}$/;if(String(password).match(pwd)){_this2.setState({hasPasswordError:false});return true;}else{_this2.setState({hasPasswordError:true});return\"Password cannot less than 6\";}}}})),React.createElement(\"button\",{type:\"submit\",className:\"mid_button \".concat(email===''||password===''||hasEmailError||hasPasswordError?'disable_button':'common_button'),onClick:this.handleSubmit},\"Submit\")),React.createElement(\"p\",null,\"No account yet? \",React.createElement(Link,{className:\"note_button\",to:\"/signup\"},\"Sign up\")));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/src/components/login/Login.js"],"names":["React","Component","firebase","StyledFirebaseAuth","Link","Textbox","Login","state","email","password","hasEmailError","hasPasswordError","errorMsg","uiConfig","signInFlow","signInOptions","auth","GoogleAuthProvider","PROVIDER_ID","FacebookAuthProvider","callbacks","signInSuccessWithAuthResult","handleSubmit","e","preventDefault","signInWithEmailAndPassword","catch","error","setState","isLoggedIn","props","onAuthStateChanged","user","prepProps","prevState","isAuthenticated","history","push","className","placeholder","type","res","name","check","required","customFunc","reg","test","String","toLowerCase","pwd","match"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './Login.css';\nimport firebase from 'firebase';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport { Link } from 'react-router-dom';\nimport { Textbox } from \"react-inputs-validation\";\n\nclass Login extends Component {\n  state = {\n    email: \"\",\n    password:\"\",\n    hasEmailError: false,\n    hasPasswordError: false,\n    errorMsg:\"\",\n  };\n\n  uiConfig = {\n    signInFlow: 'popup',\n    signInOptions: [\n      firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n      firebase.auth.FacebookAuthProvider.PROVIDER_ID,\n    ],\n    callbacks: {\n      signInSuccessWithAuthResult: () => false\n    }\n  };\n\n  componentDidMount() {\n    const { isLoggedIn } = this.props;\n    firebase.auth().onAuthStateChanged(\n      (user) => {\n        isLoggedIn(!!user)\n      }\n    );\n  }\n\n  componentDidUpdate(prepProps,prevState) {\n    const { isAuthenticated } = this.props;\n    if (prepProps.isAuthenticated === false && isAuthenticated === true) {\n        const { history } = this.props;\n        history.push('/');\n    }\n  }\n  \n  handleSubmit = (e) => {\n    e.preventDefault();\n    const { hasEmailError, hasPasswordError, email, password } = this.state;\n    if ( !hasEmailError && !hasPasswordError && email !== '' && password !== '') {\n        firebase.auth().signInWithEmailAndPassword(\n          email,\n          password\n        ).catch(error => {\n          // console.log('err='+error.code,error.message);\n          if (error !== '') {\n            this.setState({\n              email: \"\",\n              password: \"\",\n              hasEmailError: true,\n              hasPasswordError: true,\n              errorMsg: \"Your email or password is not correct.\",\n            })\n          }\n        })\n    }\n  }\n\n  render() {\n    const { email ,hasEmailError, password, hasPasswordError , errorMsg} = this.state;\n    return (\n      <div className=\"login_container\">\n        <div className=\"login_title\">Great to see you again!</div>\n        <div class=\"con\">\n          <StyledFirebaseAuth uiConfig={this.uiConfig} firebaseAuth={firebase.auth()}/>\n        </div>\n        <p>or</p>\n        <form>\n          {errorMsg !== '' ? <div className=\"errorMsg \"><i class=\"fas fa-exclamation-circle\"></i>{errorMsg}</div>: ''}\n          <div className=\"text_field\">\n            <div className={`${email === '' ? 'input_hide': 'input_title'}`}>Email</div>\n            <Textbox\n              attributesInput={{\n                className: `input_field  ${!hasEmailError ? '': 'input_empt'}`,\n                placeholder: \"Place your email here\",\n                type: \"text\"\n              }}\n              onChange={(email, e) => {\n                this.setState({ email });\n              }} \n              onBlur={e => {}}\n              validationCallback={res =>\n                this.setState({\n                  hasEmailError: res,\n                })\n              }\n              value={email}\n              validationOption={{\n                name: \"Email\", \n                check: true,\n                required: true,\n                customFunc: (email) => {\n                  const reg = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n                  if (reg.test(String(email).toLowerCase())) {\n                    this.setState({ hasEmailError: false});\n                    return true;\n                  } else {\n                    this.setState({ hasEmailError: true,});\n                    return \"Ivalid email address\";\n                  }\n                }\n              }}\n            />\n          </div>\n          <div className=\"text_field\">\n            <div className={`${password === '' ? 'input_hide': 'input_title'}`}>Password</div>\n            <Textbox\n                attributesInput={{\n                  className: `input_field  ${!hasPasswordError ? '': 'input_empt'}`,\n                  placeholder: \"Place your password here (min. 6 char)\",\n                  type: \"password\"\n                }}\n                onChange={(password, e) => {\n                  this.setState({ password });\n                }}\n                onBlur={e => {}}\n                validationCallback={res =>\n                  this.setState({\n                    hasPasswordError: res,\n                  })\n                }\n                value={password}\n                validationOption={{\n                  name: \"Password\", \n                  check: true,\n                  required: true,\n                  customFunc: (password) => {\n                    const pwd = /^\\w{6,}$/;\n                    if (String(password).match(pwd)) {\n                      this.setState({ hasPasswordError: false});\n                      return true;\n                    } else {\n                      this.setState({ hasPasswordError: true,});\n                      return \"Password cannot less than 6\";\n                    }\n                  }\n                }}\n              />\n          </div>\n          <button type=\"submit\" className={`mid_button ${email === '' || password === '' || hasEmailError || hasPasswordError  ? 'disable_button': 'common_button'}`} onClick={this.handleSubmit} >Submit</button>\n        </form>\n        <p>No account yet? <Link className=\"note_button\" to=\"/signup\">Sign up</Link></p>\n      </div>\n    )\n  }\n}\n\nexport default Login"]},"metadata":{},"sourceType":"module"}