{"ast":null,"code":"import _classCallCheck from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import firebase from'firebase';import{Link}from'react-router-dom';import{Textbox}from\"react-inputs-validation\";var Signup=/*#__PURE__*/function(_Component){_inherits(Signup,_Component);function Signup(){var _getPrototypeOf2;var _this;_classCallCheck(this,Signup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Signup)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={email:\"\",password:\"\",username:\"\",hasUsernameError:false,hasEmailError:false,hasPasswordError:false,errorMsg:\"\"};_this.handleSubmit=function(e){e.preventDefault();var _this$state=_this.state,hasEmailError=_this$state.hasEmailError,hasPasswordError=_this$state.hasPasswordError,email=_this$state.email,password=_this$state.password,username=_this$state.username;if(!hasEmailError&&!hasPasswordError&&email!==''&&password!==''&&username!==''){firebase.auth().createUserWithEmailAndPassword(email,password).catch(function(error){// console.log('err='+error.code,error.message);\nif(error!==''){_this.setState({email:\"\",password:\"\",username:\"\",hasEmailError:true,errorMsg:\"The email address is already in use by another account.\"});}});firebase.auth().onAuthStateChanged(function(user){if(user){user.updateProfile({displayName:_this.state.username}).then(function(){var displayName=user.displayName;});}});}};return _this;}_createClass(Signup,[{key:\"componentDidMount\",value:function componentDidMount(){var isLoggedIn=this.props.isLoggedIn;firebase.auth().onAuthStateChanged(function(user){isLoggedIn(!!user);console.log(\"user\",user);});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prepProps){var isAuthenticated=this.props.isAuthenticated;if(prepProps.isAuthenticated===false&&isAuthenticated===true){var history=this.props.history;history.push('/');}}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,email=_this$state2.email,hasEmailError=_this$state2.hasEmailError,password=_this$state2.password,hasPasswordError=_this$state2.hasPasswordError,errorMsg=_this$state2.errorMsg,hasUsernameError=_this$state2.hasUsernameError,username=_this$state2.username;return React.createElement(\"div\",{className:\"login_container\"},React.createElement(\"div\",{className:\"login_title\"},\"Start using Gaze!\"),React.createElement(\"form\",null,errorMsg!==''?React.createElement(\"div\",{className:\"errorMsg \"},React.createElement(\"i\",{class:\"fas fa-exclamation-circle\"}),errorMsg):'',React.createElement(\"div\",{className:\"text_field\"},React.createElement(\"div\",{className:\"\".concat(email===''?'input_hide':'input_title')},\"Email\"),React.createElement(Textbox,{attributesInput:{className:\"input_field  \".concat(!hasEmailError?'':'input_empt'),placeholder:\"Place your email here\",type:\"text\"},onChange:function onChange(email,e){_this2.setState({email:email});},onBlur:function onBlur(e){},validationCallback:function validationCallback(res){return _this2.setState({hasEmailError:res});},value:email,validationOption:{name:\"Email\",check:true,required:true,customFunc:function customFunc(email){var reg=/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;if(reg.test(String(email).toLowerCase())){_this2.setState({hasEmailError:false});return true;}else{_this2.setState({hasEmailError:true});return\"Ivalid email address\";}}}})),React.createElement(\"div\",{className:\"text_field\"},React.createElement(\"div\",{className:\"\".concat(username===''?'input_hide':'input_title')},\"Username\"),React.createElement(Textbox,{attributesInput:{className:\"input_field  \".concat(!hasUsernameError?'':'input_empt'),placeholder:\"Place your username here\",type:\"text\"},onChange:function onChange(username,e){_this2.setState({username:username});},onBlur:function onBlur(e){},validationCallback:function validationCallback(res){return _this2.setState({hasUsernameError:res});},value:username,validationOption:{name:\"Username\",check:true,required:true}})),React.createElement(\"div\",{className:\"text_field\"},React.createElement(\"div\",{className:\"\".concat(password===''?'input_hide':'input_title')},\"Password\"),React.createElement(Textbox,{attributesInput:{className:\"input_field  \".concat(!hasPasswordError?'':'input_empt'),placeholder:\"Place your password here (min. 6 char)\",type:\"password\"},onChange:function onChange(password,e){_this2.setState({password:password});},onBlur:function onBlur(e){},validationCallback:function validationCallback(res){return _this2.setState({hasPasswordError:res});},value:password,validationOption:{name:\"Password\",check:true,required:true,customFunc:function customFunc(password){var psw=/^\\w{6,}$/;if(String(password).match(psw)){_this2.setState({hasPasswordError:false});return true;}else{_this2.setState({hasPasswordError:true});return\"Password cannot less than 6\";}}}})),React.createElement(\"button\",{type:\"submit\",className:\"mid_button \".concat(email===''||password===''||hasEmailError||hasPasswordError?'disable_button':'common_button'),onClick:this.handleSubmit},\"Submit\")),React.createElement(\"p\",null,\"Already have an account? \",React.createElement(Link,{className:\"note_button\",to:\"/login\"},\"Login\")));}}]);return Signup;}(Component);export default Signup;","map":{"version":3,"sources":["/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/src/components/signup/Signup.js"],"names":["React","Component","firebase","Link","Textbox","Signup","state","email","password","username","hasUsernameError","hasEmailError","hasPasswordError","errorMsg","handleSubmit","e","preventDefault","auth","createUserWithEmailAndPassword","catch","error","setState","onAuthStateChanged","user","updateProfile","displayName","then","isLoggedIn","props","console","log","prepProps","isAuthenticated","history","push","className","placeholder","type","res","name","check","required","customFunc","reg","test","String","toLowerCase","psw","match"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport firebase from 'firebase';\nimport { Link } from 'react-router-dom';\nimport { Textbox } from \"react-inputs-validation\";\n\nclass Signup extends Component {\n  state = {\n    email: \"\",\n    password:\"\",\n    username:\"\",\n    hasUsernameError: false,\n    hasEmailError: false,\n    hasPasswordError: false,\n    errorMsg:\"\",\n  };\n\n  componentDidMount() {\n    const { isLoggedIn } = this.props;\n    firebase.auth().onAuthStateChanged(\n      (user) => {\n        isLoggedIn(!!user)\n        console.log(\"user\",user)\n      }\n    );\n  }\n\n  componentDidUpdate(prepProps) {\n    const {isAuthenticated } = this.props;\n    if (prepProps.isAuthenticated === false && isAuthenticated === true) {\n        const { history } = this.props;\n        history.push('/');\n    }\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const { hasEmailError, hasPasswordError, email, password, username } = this.state;\n    if ( !hasEmailError && !hasPasswordError && email !== '' && password !== '' && username !== '') {\n      firebase.auth().createUserWithEmailAndPassword(\n        email,\n        password\n      ).catch(error => {\n        // console.log('err='+error.code,error.message);\n        if (error !== '') {\n          this.setState({\n            email: \"\",\n            password: \"\",\n            username: \"\",\n            hasEmailError: true,\n            errorMsg: \"The email address is already in use by another account.\",\n          })\n        }\n      });\n      firebase.auth().onAuthStateChanged((user) => {\n        if (user) {\n          user.updateProfile({\n            displayName: this.state.username,\n          }).then(() => {\n            const displayName = user.displayName;\n            \n          })\n        }\n      });\n    }\n  }\n\n  render() {\n    const { email ,hasEmailError, password, hasPasswordError , errorMsg, hasUsernameError,username} = this.state;\n    return (\n      <div className=\"login_container\">\n        <div className=\"login_title\">Start using Gaze!</div>\n        <form>\n          {errorMsg !== '' ? <div className=\"errorMsg \"><i class=\"fas fa-exclamation-circle\"></i>{errorMsg}</div>: ''}\n          <div className=\"text_field\">\n            <div className={`${email === '' ? 'input_hide': 'input_title'}`}>Email</div>\n            <Textbox\n                attributesInput={{\n                  className: `input_field  ${!hasEmailError ? '': 'input_empt'}`,\n                  placeholder: \"Place your email here\",\n                  type: \"text\"\n                }}\n                onChange={(email, e) => {\n                  this.setState({ email });\n                }} \n                onBlur={e => {}}\n                validationCallback={res =>\n                  this.setState({\n                    hasEmailError: res,\n                  })\n                }\n                value={email}\n                validationOption={{\n                  name: \"Email\", \n                  check: true,\n                  required: true,\n                  customFunc: email => {\n                    const reg = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n                    if (reg.test(String(email).toLowerCase())) {\n                      this.setState({ hasEmailError: false});\n                      return true;\n                    } else {\n                      this.setState({ hasEmailError: true,});\n                      return \"Ivalid email address\";\n                    }\n                  }\n                }}\n              />\n          </div>\n          <div className=\"text_field\">\n            <div className={`${username === '' ? 'input_hide': 'input_title'}`}>Username</div>\n            <Textbox\n              attributesInput={{\n                className: `input_field  ${!hasUsernameError ? '': 'input_empt'}`,\n                placeholder: \"Place your username here\",\n                type: \"text\"\n              }}\n              onChange={(username, e) => {\n                this.setState({ username });\n              }} \n              onBlur={e => {}}\n              validationCallback={res =>\n                this.setState({\n                  hasUsernameError: res,\n                })\n              }\n              value={username}\n              validationOption={{\n                name: \"Username\", \n                check: true,\n                required: true,\n              }}\n            />\n          </div>\n          <div className=\"text_field\">\n            <div className={`${password === '' ? 'input_hide': 'input_title'}`}>Password</div>\n            <Textbox\n              attributesInput={{\n                className: `input_field  ${!hasPasswordError ? '': 'input_empt'}`,\n                placeholder: \"Place your password here (min. 6 char)\",\n                type: \"password\"\n              }}\n              onChange={(password, e) => {\n                this.setState({ password });\n              }} \n              onBlur={e => {}}\n              validationCallback={res =>\n                this.setState({\n                  hasPasswordError: res,\n                })\n              }\n              value={password}\n              validationOption={{\n                name: \"Password\", \n                check: true,\n                required: true,\n                customFunc: (password) => {\n                  const psw = /^\\w{6,}$/;\n                  if (String(password).match(psw)) {\n                    this.setState({ hasPasswordError: false});\n                    return true;\n                  } else {\n                    this.setState({ hasPasswordError: true,});\n                    return \"Password cannot less than 6\";\n                  }\n                }\n              }}\n            />\n          </div>\n          <button type=\"submit\" className={`mid_button ${email === '' || password === '' || hasEmailError || hasPasswordError ? 'disable_button': 'common_button'}`} onClick={this.handleSubmit} >Submit</button>\n        </form>\n        <p>Already have an account? <Link className=\"note_button\" to=\"/login\">Login</Link></p>\n      </div>\n    )\n  }\n}\nexport default Signup\n"]},"metadata":{},"sourceType":"module"}