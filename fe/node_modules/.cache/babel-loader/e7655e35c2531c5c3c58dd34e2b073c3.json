{"ast":null,"code":"import _classCallCheck from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";/* jsx-a11y/no-static-element-interactions */import React,{Component,Fragment}from'react';import Masonry from'react-masonry-css';import firebase from'firebase';import Loading from'../loading/Loading';export var Collections=/*#__PURE__*/function(_Component){_inherits(Collections,_Component);function Collections(props){var _this;_classCallCheck(this,Collections);_this=_possibleConstructorReturn(this,_getPrototypeOf(Collections).call(this,props));_this.handleHoverOut=function(){_this.setState({showDeleteBtn:''});};_this.state={currentCollection:decodeURI(_this.props.match.params.collectionName),showDeleteBtn:''};return _this;}_createClass(Collections,[{key:\"componentDidMount\",value:function componentDidMount(){var currentCollection=this.state.currentCollection;var _this$props=this.props,isAuthenticated=_this$props.isAuthenticated,getCollectionSaves=_this$props.getCollectionSaves;if(isAuthenticated){getCollectionSaves(firebase.auth().currentUser.email,currentCollection);}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prepProps,prevState){var currentCollection=this.state.currentCollection;var _this$props2=this.props,history=_this$props2.history,isAuthenticated=_this$props2.isAuthenticated,getCollectionSaves=_this$props2.getCollectionSaves,isLoadingDeleteSave=_this$props2.isLoadingDeleteSave,deleteSaveMsg=_this$props2.deleteSaveMsg;if(prepProps.isAuthenticated===false&&isAuthenticated===true){getCollectionSaves(firebase.auth().currentUser.email,currentCollection);}if(prepProps.isAuthenticated===true&&isAuthenticated===false){history.push('/');}// 先顯示已刪除通知再刷新\nthis.timer=setTimeout(function(){if(prepProps.isLoadingDeleteSave===false&&isLoadingDeleteSave===true){if(deleteSaveMsg===''){window.location.reload();}history.goBack();}},600);}},{key:\"handleHoverOver\",value:function handleHoverOver(id){this.setState({showDeleteBtn:id});}},{key:\"handleDelete\",value:function handleDelete(imgId,collection){var deleteSingleSave=this.props.deleteSingleSave;var deleteSave={email:firebase.auth().currentUser.email,imgId:imgId,collection:collection};deleteSingleSave(deleteSave);}},{key:\"render\",value:function render(){var _this2=this;var _this$props3=this.props,isAuthenticated=_this$props3.isAuthenticated,collectionSaves=_this$props3.collectionSaves,history=_this$props3.history;var _this$state=this.state,currentCollection=_this$state.currentCollection,showDeleteBtn=_this$state.showDeleteBtn;var breakpointColumnsObj={default:3,1100:2,700:1};return React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"profile\"},React.createElement(\"div\",{className:\"username\"},isAuthenticated&&currentCollection),React.createElement(\"div\",{className:\"profile_subtitle\"},\"Photos \",collectionSaves.length)),React.createElement(\"ul\",null,React.createElement(Masonry,{breakpointCols:breakpointColumnsObj,className:\"my-masonry-grid\",columnClassName:\"my-masonry-grid_column\"},collectionSaves.map(function(item,index){return React.createElement(Fragment,null,React.createElement(\"div\",{className:\"outter\",onMouseOver:function onMouseOver(){return _this2.handleHoverOver(collectionSaves[index].id);},onMouseOut:_this2.handleHoverOut},React.createElement(\"button\",{className:showDeleteBtn===collectionSaves[index].id?'save_button':'hide_style',onClick:function onClick(){return _this2.handleDelete(collectionSaves[index].imgId,currentCollection);}},React.createElement(\"i\",{className:\"fas fa-trash-alt\"})),React.createElement(\"li\",{key:collectionSaves[index].imgId,role:\"presentation\",onClick:function onClick(){return history.push(\"/images/\".concat(collectionSaves[index].imgId));}},React.createElement(\"div\",{className:\"preview\"},React.createElement(\"div\",{className:showDeleteBtn===collectionSaves[index].id?'hover_layer':'hide_style'}),React.createElement(\"img\",{src:collectionSaves[index].content,alt:\"\"})))));}))));}}]);return Collections;}(Component);export default Collections;","map":{"version":3,"sources":["/Users/Lingo/Rong/JavaScript/26_portfolio/gaze_project/gaze/src/components/collections/Collections.js"],"names":["React","Component","Fragment","Masonry","firebase","Loading","Collections","props","handleHoverOut","setState","showDeleteBtn","state","currentCollection","decodeURI","match","params","collectionName","isAuthenticated","getCollectionSaves","auth","currentUser","email","prepProps","prevState","history","isLoadingDeleteSave","deleteSaveMsg","push","timer","setTimeout","window","location","reload","goBack","id","imgId","collection","deleteSingleSave","deleteSave","collectionSaves","breakpointColumnsObj","default","length","map","item","index","handleHoverOver","handleDelete","content"],"mappings":"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","sourcesContent":["/* jsx-a11y/no-static-element-interactions */\nimport React, { Component,Fragment } from 'react'\nimport Masonry from 'react-masonry-css'\nimport firebase from 'firebase';\nimport Loading from '../loading/Loading';\n\nexport class Collections extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentCollection: decodeURI(this.props.match.params.collectionName),\n      showDeleteBtn: '',\n    };\n  }\n\n  componentDidMount() {\n    const { currentCollection } = this.state;\n    const { isAuthenticated, getCollectionSaves} = this.props;\n    if (isAuthenticated) {\n      getCollectionSaves(firebase.auth().currentUser.email,currentCollection)\n    }\n  }\n\n  componentDidUpdate(prepProps,prevState) {\n    const { currentCollection } = this.state;\n    const { history,isAuthenticated,getCollectionSaves,isLoadingDeleteSave,deleteSaveMsg } = this.props;\n    if (prepProps.isAuthenticated === false && isAuthenticated === true) {\n      getCollectionSaves(firebase.auth().currentUser.email,currentCollection)\n    }\n    if (prepProps.isAuthenticated === true && isAuthenticated === false) {\n      history.push('/')\n    }\n    // 先顯示已刪除通知再刷新\n    this.timer = setTimeout(\n      () => {\n        if (prepProps.isLoadingDeleteSave === false && isLoadingDeleteSave === true) {\n          if(deleteSaveMsg === '') {\n            window.location.reload();\n          }\n          history.goBack()\n        }\n      },\n      600,\n    );\n  }\n\n  handleHoverOver(id){\n    this.setState({\n      showDeleteBtn: id,\n    })\n  }\n\n  handleHoverOut = () => {\n    this.setState({\n      showDeleteBtn: ''\n    })\n  }\n\n  handleDelete(imgId, collection) {\n    const { deleteSingleSave } = this.props;\n    const deleteSave = {\n      email: firebase.auth().currentUser.email,\n      imgId,\n      collection,\n    }\n    deleteSingleSave(deleteSave)\n  }\n\n  render() {\n    const { isAuthenticated,collectionSaves,history } = this.props;\n    const { currentCollection,showDeleteBtn } = this.state;\n    const breakpointColumnsObj = {\n      default: 3,\n      1100: 2,\n      700: 1\n    };\n\n    return (\n      <div className=\"container\">\n        <div className=\"profile\">\n          <div className=\"username\">{isAuthenticated && currentCollection}</div>\n          <div className=\"profile_subtitle\">Photos {collectionSaves.length}</div>\n        </div>\n        <ul>\n        <Masonry\n          breakpointCols={breakpointColumnsObj}\n          className=\"my-masonry-grid\"\n          columnClassName=\"my-masonry-grid_column\">\n          {collectionSaves.map((item, index) => {\n            return (\n              <Fragment>\n                  <div className=\"outter\"\n                  onMouseOver={() => this.handleHoverOver(collectionSaves[index].id)}\n                  onMouseOut={this.handleHoverOut}\n                  >\n                    <button className={showDeleteBtn === collectionSaves[index].id? 'save_button':'hide_style'}\n                    onClick={() => this.handleDelete(collectionSaves[index].imgId,currentCollection)} \n                    ><i className=\"fas fa-trash-alt\"></i></button>\n                    <li key={collectionSaves[index].imgId} role=\"presentation\" onClick={() => history.push(`/images/${collectionSaves[index].imgId}`)}>\n                      <div className=\"preview\">\n                        <div className={showDeleteBtn === collectionSaves[index].id ? 'hover_layer':'hide_style'}></div>\n                        <img src={collectionSaves[index].content} alt=\"\" />\n                      </div>\n                    </li>\n                  </div>\n              </Fragment>\n            );\n            })\n          }\n        </Masonry>\n        </ul>\n      </div>\n    )\n  }\n}\n\nexport default Collections\n"]},"metadata":{},"sourceType":"module"}